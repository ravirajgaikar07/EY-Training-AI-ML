<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Collab | Collab Finder ü§ù</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <nav>
            <h1 class="logo">Collab Finder ü§ù</h1>
        </nav>

        <div class="form-section">
            <h2>üé• Creator Enrollment</h2>
            <p>Enter your creator details and get matched with brands.</p>

            <div class="form-card long-form">
                <form id="collabForm">

                    <div class="form-grid">

                        <div class="input-group">
                            <label>Display Name</label>
                            <input type="text" id="display_name" required>
                        </div>

                        <div class="input-group">
                            <label>Username / Handle</label>
                            <input type="text" id="user_name" required>
                        </div>

                        <div class="input-group">
                            <label>Email</label>
                            <input type="email" id="email" required>
                        </div>

                        <div class="input-group">
                            <label>Phone Number</label>
                            <input type="text" id="phone_number" required>
                        </div>

                        <div class="input-group">
                            <label>Niche</label>
                            <input type="text" id="niches" placeholder="Fashion, Tech, Travel..." required>
                        </div>

                        <div class="input-group">
                            <label>Category</label>
                            <input type="text" id="category" placeholder="Influencer, Blogger, Creator" required>
                        </div>

                        <div class="input-group">
                            <label>Followers Count</label>
                            <input type="number" id="followers_count" required>
                        </div>

                        <div class="input-group">
                            <label>Audience Geography</label>
                            <input type="text" id="audience_geography" required>
                        </div>

                        <div class="input-group">
                            <label>Reel Engagement (%)</label>
                            <input type="number" id="reel_engagement" step="0.01" required>
                        </div>

                        <div class="input-group">
                            <label>Post Engagement (%)</label>
                            <input type="number" id="post_engagement" step="0.01" required>
                        </div>

                        <div class="input-group">
                            <label>Story Engagement (%)</label>
                            <input type="number" id="story_engagement" step="0.01" required>
                        </div>

                        <div class="input-group">
                            <label>External LinkTap (%)</label>
                            <input type="number" id="external_linktap" step="0.01" required>
                        </div>

                    </div>

                    <button type="submit" class="btn">Enroll Creator</button>

                </form>

                <p id="successMsg" class="success hidden"></p>
                <p id="errorMsg" class="success" style="color:red; display:none;"></p>

                <a href="index.html" class="back-link">‚Üê Back to Home</a>
            </div>
        </div>

        <footer>
            <p>¬© 2025 Collab Finder. All rights reserved.</p>
        </footer>
    </div>

<script>
    const BASE_URL = "http://172.10.2.13:8000";

    document.getElementById("collabForm").addEventListener("submit", async (e) => {
        e.preventDefault();

        const payload = {
            display_name: document.getElementById("display_name").value,
            user_name: document.getElementById("user_name").value,
            email: document.getElementById("email").value,
            phone_number: document.getElementById("phone_number").value,
            niches: document.getElementById("niches").value,
            category: document.getElementById("category").value,
            followers_count: parseInt(document.getElementById("followers_count").value),
            audience_geography: document.getElementById("audience_geography").value,
            reel_engagement: parseFloat(document.getElementById("reel_engagement").value),
            post_engagement: parseFloat(document.getElementById("post_engagement").value),
            story_engagement: parseFloat(document.getElementById("story_engagement").value),
            external_linktap: parseFloat(document.getElementById("external_linktap").value)
        };

        try {
            const res = await fetch(`${BASE_URL}/enroll_creator`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload)
            });

            const data = await res.json();

            if (!res.ok) throw data;

            document.getElementById("successMsg").textContent =
              "üéâ Creator enrolled successfully!";
            document.getElementById("successMsg").classList.remove("hidden");

        } catch(err) {
            document.getElementById("errorMsg").textContent =
              "‚ùå Error enrolling creator!";
            document.getElementById("errorMsg").style.display = "block";
        }
    });
</script>

</body>
</html>
